<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>BƒÉtƒÉlia nativilor digitali</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #020617, #020617 45%, #020617 100%);
      color: #e5e7eb;
      display: flex;
      align-items: stretch;
      justify-content: center;
      padding: 10px;
    }

    .app {
      width: 100%;
      max-width: 900px;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 22px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
      padding: 12px 14px 16px;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      animation: cardIn 0.4s ease-out;
    }

    @keyframes cardIn {
      from { opacity: 0; transform: translateY(18px) scale(0.97); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* HEADER */

    .header {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 10px;
    }

    @media (min-width: 768px) {
      .header {
        flex-direction: row;
        justify-content: space-between;
        align-items: flex-start;
      }
    }

    .title-block {
      flex: 1;
      min-width: 0;
    }

    .title {
      font-size: 1.3rem;
      font-weight: 700;
    }

    .subtitle {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-top: 2px;
    }

    .stats-bar {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      align-items: center;
      gap: 6px;
      margin-top: 6px;
    }

    @media (min-width: 768px) {
      .stats-bar {
        justify-content: flex-end;
        margin-top: 0;
        margin-left: 10px;
      }
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 0.72rem;
    }

    .badge-label {
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-size: 0.65rem;
    }

    .badge-value {
      font-weight: 600;
    }

    .badge.player {
      border-color: rgba(34, 197, 94, 0.8);
      background: radial-gradient(circle at top left, rgba(22, 163, 74, 0.35), rgba(17, 24, 39, 0.95));
    }

    .badge.timer {
      border-color: rgba(248, 113, 113, 0.9);
      background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.25), rgba(17, 24, 39, 0.95));
    }

    .badge.pulse {
      animation: pulse 0.3s ease-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }

    /* CON»öINUT PRINCIPAL */

    .content {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    @media (min-width: 768px) {
      .content {
        display: grid;
        grid-template-columns: 1.6fr 1fr;
        gap: 12px;
      }
    }

    .question-panel {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .question-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .question-box {
      border-radius: 14px;
      padding: 10px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(75, 85, 99, 0.9);
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.7);
    }

    .question-text {
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .timer-bar-wrapper {
      margin-top: 8px;
      height: 7px;
      background: rgba(31, 41, 55, 0.9);
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .timer-bar {
      height: 100%;
      width: 100%;
      background: linear-gradient(to right, #22c55e, #f97316, #ef4444);
      transform-origin: left;
      transform: scaleX(1);
      transition: transform 0.18s linear;
    }

    .answers {
      margin-top: 8px;
      display: grid;
      gap: 6px;
    }

    .answer-btn {
      width: 100%;
      text-align: left;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 0.85rem;
      cursor: pointer;
      display: flex;
      gap: 8px;
      align-items: center;
      transition: transform 0.06s ease, box-shadow 0.1s ease, background 0.15s ease, border-color 0.15s ease;
      touch-action: manipulation;
    }

    .answer-btn:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    }

    .answer-key {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      color: #9ca3af;
      flex-shrink: 0;
    }

    .answer-text {
      flex: 1;
    }

    .answer-btn.correct {
      background: radial-gradient(circle at top left, rgba(22, 163, 74, 0.35), rgba(15, 23, 42, 0.98));
      border-color: rgba(34, 197, 94, 0.9);
    }

    .answer-btn.wrong {
      background: radial-gradient(circle at top left, rgba(239, 68, 68, 0.35), rgba(15, 23, 42, 0.98));
      border-color: rgba(248, 113, 113, 0.95);
    }

    .answer-btn.disabled {
      opacity: 0.75;
      pointer-events: none;
    }

    .answer-key.correct {
      border-color: rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
    }

    .answer-key.wrong {
      border-color: rgba(239, 68, 68, 0.9);
      color: #fecaca;
    }

    .controls {
      margin-top: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .btn {
      padding: 7px 12px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.78rem;
      transition: transform 0.06s ease, box-shadow 0.1s ease, background 0.15s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      touch-action: manipulation;
    }

    .btn-primary {
      background: linear-gradient(to right, #22c55e, #16a34a);
      color: #022c22;
      box-shadow: 0 7px 16px rgba(34, 197, 94, 0.35);
    }

    .btn-primary:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 3px 8px rgba(34, 197, 94, 0.25);
    }

    .btn-ghost {
      background: rgba(15, 23, 42, 0.96);
      color: #e5e7eb;
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .btn[disabled] {
      opacity: 0.55;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    /* PANOU JURNAL */

    .side-panel {
      border-radius: 14px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 0.8rem;
    }

    .info-header {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .info-avatar {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #22c55e, #16a34a, #15803d);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 0.85rem;
      color: white;
      box-shadow: 0 5px 12px rgba(22, 163, 74, 0.6);
    }

    .info-title {
      font-size: 0.82rem;
      font-weight: 600;
    }

    .info-subtitle {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .info-bubble {
      margin-top: 2px;
      border-radius: 10px;
      padding: 6px 8px;
      background: rgba(15, 23, 42, 0.97);
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 0.78rem;
      line-height: 1.3;
    }

    .info-meta {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    .log {
      margin-top: 2px;
      font-size: 0.7rem;
      color: #9ca3af;
      max-height: 110px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .log-entry {
      margin-bottom: 2px;
    }

    .log-entry strong {
      color: #e5e7eb;
    }

    .footer-note {
      margin-top: 8px;
      font-size: 0.7rem;
      color: #6b7280;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .highlight { color: #22c55e; }

    .hidden { display: none !important; }

    /* PAGINA DE START ‚Äì full-screen, cu scroll pe mobil */

    .start-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 0.99));
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      z-index: 100;
      overflow-y: auto;
    }

    .start-card {
      width: 100%;
      max-width: 520px;
      background: rgba(15, 23, 42, 1);
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 16px 35px rgba(0, 0, 0, 0.8);
      padding: 14px 14px 12px;
      animation: startIn 0.3s ease-out;
      font-size: 0.8rem;
    }

    @keyframes startIn {
      from { opacity: 0; transform: translateY(12px) scale(0.97); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }

    .start-title {
      font-size: 1.2rem;
      margin-bottom: 4px;
      font-weight: 700;
    }

    .start-subtitle {
      font-size: 0.8rem;
      color: #9ca3af;
      margin-bottom: 6px;
    }

    .start-section-title {
      font-size: 0.8rem;
      font-weight: 600;
      margin-top: 6px;
      margin-bottom: 2px;
      color: #e5e7eb;
    }

    .start-list {
      font-size: 0.78rem;
      color: #d1d5db;
      padding-left: 16px;
    }

    .start-list li {
      margin-bottom: 3px;
    }

    .start-name-row {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .start-name-row label {
      font-size: 0.78rem;
      color: #e5e7eb;
    }

    .start-name-row input {
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.97);
      color: #e5e7eb;
      font-size: 0.78rem;
    }

    .start-name-row input::placeholder {
      color: #6b7280;
    }

    .start-note {
      margin-top: 4px;
      font-size: 0.74rem;
      color: #9ca3af;
    }

    .start-buttons {
      margin-top: 8px;
      display: flex;
      justify-content: flex-end;
      gap: 6px;
    }

    @media (max-width: 400px) {
      .start-card {
        padding: 12px 10px 10px;
      }
    }
  </style>
</head>
<body>
  <!-- PAGINA DE START ‚Äì apare imediat dupƒÉ scanarea QR -->
  <div class="start-overlay" id="startOverlay">
    <div class="start-card">
      <div class="start-title">BƒÉtƒÉlia nativilor digitali üëæ</div>
      <div class="start-subtitle">
        Vei rƒÉspunde la c√¢teva √ÆntrebƒÉri despre ‚Äûnativi digitali‚Äù »ôi tehnologie. Jocul este individual,
        dar scorurile pot fi comparate √Æntre colegi.
      </div>

      <div class="start-section-title">Cum se joacƒÉ:</div>
      <ul class="start-list">
        <li>üì± Fiecare √Æntrebare are mai multe variante de rƒÉspuns.</li>
        <li>‚è±Ô∏è Ai timp limitat pe √Æntrebare ‚Äì cu c√¢t rƒÉspunzi mai repede, cu at√¢t prime»ôti mai multe puncte.</li>
        <li>üèÜ La final, aratƒÉ scorul profesorului pentru clasamentul clasei.</li>
      </ul>

      <div class="start-section-title">Introduce-»õi numele (op»õional):</div>
      <div class="start-name-row">
        <label for="startNameInput">Numele tƒÉu:</label>
        <input id="startNameInput" type="text" placeholder="Ex: Andrei, Maria..." />
      </div>

      <div class="start-note">
        Numele este folosit doar pentru afi»ôarea scorului pe acest dispozitiv. Cronometrul √Æncepe abia c√¢nd ape»ôi
        <strong>Start joc</strong> √Æn ecranul urmƒÉtor.
      </div>

      <div class="start-buttons">
        <button class="btn btn-ghost" id="startSkipNameBtn">IntrƒÉ fƒÉrƒÉ nume</button>
        <button class="btn btn-primary" id="enterGameBtn">IntrƒÉ √Æn joc</button>
      </div>
    </div>
  </div>

  <!-- APLICATIA PRINCIPALƒÇ -->
  <div class="app">
    <div class="header">
      <div class="title-block">
        <div class="title">BƒÉtƒÉlia nativilor digitali</div>
        <div class="subtitle">
          RƒÉspunde c√¢t mai rapid »ôi corect. La final, comparƒÉ scorul cu colegii tƒÉi.
        </div>
      </div>
      <div class="stats-bar">
        <div class="badge player" id="playerBadge">
          <div>
            <div class="badge-label">Elev</div>
            <div class="badge-value" id="playerNameLabel">Tu</div>
          </div>
          <div class="badge-value" id="playerScore">0</div>
        </div>
        <div class="badge timer" id="timerBadge">
          <div>
            <div class="badge-label">Timp</div>
            <div class="badge-value"><span id="timeLeft">0</span>s</div>
          </div>
        </div>
      </div>
    </div>

    <div class="content">
      <div class="question-panel">
        <div class="question-meta">
          <span>√éntrebarea <span id="questionIndex">1</span>/<span id="questionTotal">1</span></span>
          <span id="questionCategory">‚Äî</span>
        </div>

        <div class="question-box">
          <div class="question-text" id="questionText">
            ApasƒÉ ‚ÄûStart joc‚Äù c√¢nd e»ôti pregƒÉtit sƒÉ √Æncepi seria de √ÆntrebƒÉri.
          </div>
          <div class="timer-bar-wrapper">
            <div class="timer-bar" id="timerBar"></div>
          </div>
          <div class="answers" id="answersContainer"></div>
        </div>

        <div class="controls">
          <button class="btn btn-ghost" id="restartBtn" disabled>Reia jocul</button>
          <button class="btn btn-primary" id="startBtn">Start joc</button>
        </div>
      </div>

      <div class="side-panel">
        <div class="info-header">
          <div class="info-avatar">J</div>
          <div>
            <div class="info-title">Jurnal de joc</div>
            <div class="info-subtitle">Vezi aici mesajele »ôi explica»õiile pentru rƒÉspunsuri.</div>
          </div>
        </div>
        <div class="info-bubble" id="infoBubble">
          Aici vor apƒÉrea mesaje legate de rƒÉspunsurile tale: dacƒÉ ai rƒÉspuns corect, c√¢te puncte ai c√¢»ôtigat »ôi explica»õii.
        </div>
        <div class="info-meta" id="infoMeta">ApasƒÉ ‚ÄûStart joc‚Äù pentru a √Æncepe prima √Æntrebare.</div>
        <div class="log" id="log"></div>
      </div>
    </div>

    <div class="footer-note">
      <span>üîÅ Fiecare elev joacƒÉ individual pe telefonul sƒÉu.</span>
      <span>üèÜ La final, profesorul poate nota scorurile pentru un clasament al clasei.</span>
    </div>
  </div>

  <script>
    // 1. √éNTREBƒÇRI ‚Äì cu corectƒÉrile tale (Q3 = b, Q7 = a)
    const questions = [
      {
        text: "Ce √ÆnseamnƒÉ termenul ‚Äûnativ digital‚Äù?",
        options: [
          "O persoanƒÉ care a crescut √Æntr-o lume fƒÉrƒÉ tehnologie.",
          "O persoanƒÉ care a crescut folosind tehnologia »ôi Internetul.",
          "O persoanƒÉ care evitƒÉ tehnologia."
        ],
        correctIndex: 1, // b
        category: "Nativi digitali",
        explanation: "Nativii digitali sunt cei care au crescut √Ænconjura»õi de tehnologie »ôi o folosesc natural √Æn via»õa de zi cu zi."
      },
      {
        text: "Ce instrument digital poate ajuta la √ÆnvƒÉ»õarea personalizatƒÉ?",
        options: [
          "Manualele tipƒÉrite.",
          "Platformele de √ÆnvƒÉ»õare online cu inteligen»õa artificialƒÉ.",
          "Televizorul."
        ],
        correctIndex: 1, // b
        category: "√énvƒÉ»õare digitalƒÉ",
        explanation: "Platformele digitale cu AI pot adapta lec»õiile √Æn func»õie de nevoile fiecƒÉrui elev."
      },
      {
        text: "Profesorul virtual poate personaliza procesul de √ÆnvƒÉ»õare prin:",
        options: [
          "Monitorizarea progresului »ôi adaptarea con»õinutului la nevoile fiecƒÉrui elev.",
          "Predarea aceluia»ôi material pentru to»õi, indiferent de nivel.",
          "√énlocuirea completƒÉ a motiva»õiei elevului."
        ],
        correctIndex: 1, // b ‚Äì conform indica»õiei tale
        category: "Profesor virtual",
        explanation: "√én aceastƒÉ versiune de joc, este marcatƒÉ ca fiind corectƒÉ varianta b), conform setƒÉrii tale."
      },
      {
        text: "Care dintre urmƒÉtoarele afirma»õii despre nativii digitali este cea mai corectƒÉ?",
        options: [
          "Ei se concentreazƒÉ mai bine c√¢nd au mai multe distrageri digitale.",
          "Ei folosesc tehnologia pentru a cƒÉuta rapid informa»õii »ôi a rezolva probleme complexe.",
          "Ei evitƒÉ complet metodele tradi»õionale de √ÆnvƒÉ»õare."
        ],
        correctIndex: 1, // b
        category: "Nativi digitali",
        explanation: "Nativii digitali folosesc tehnologia ca instrument de rezolvare rapidƒÉ a problemelor »ôi acces la informa»õii."
      },
      {
        text: "√én ce mod poate inteligen»õa artificialƒÉ sƒÉ influen»õeze viitorul educa»õiei?",
        options: [
          "Prin crearea de programe care eliminƒÉ complet profesorii.",
          "Prin adaptarea materialului didactic la stilul »ôi ritmul fiecƒÉrui elev.",
          "Prin reducerea accesului elevilor la informa»õii complexe."
        ],
        correctIndex: 1, // b
        category: "AI √Æn educa»õie",
        explanation: "AI poate personaliza √ÆnvƒÉ»õarea, adapt√¢nd materialele pentru ritmul »ôi nivelul fiecƒÉrui elev."
      },
      {
        text: "Ce poate limita eficien»õa unui ‚Äûprofesor virtual‚Äù?",
        options: [
          "Lipsa interac»õiunii sociale »ôi a feedback-ului uman.",
          "Accesul la multiple resurse digitale.",
          "Posibilitatea de a personaliza lec»õiile."
        ],
        correctIndex: 0, // a
        category: "LimitƒÉri",
        explanation: "Interac»õiunea umanƒÉ »ôi feedback-ul personal rƒÉm√¢n esen»õiale √Æn educa»õie."
      },
      {
        text: "Cum pot nativii digitali sƒÉ profite cel mai mult de instrumentele digitale de √ÆnvƒÉ»õare?",
        options: [
          "Folosindu-le doar pentru a copia teme.",
          "Interac»õion√¢nd activ, pun√¢nd √ÆntrebƒÉri »ôi test√¢nd informa»õiile.",
          "LƒÉs√¢nd aplica»õiile sƒÉ decidƒÉ tot ce √Ænva»õƒÉ."
        ],
        correctIndex: 0, // a ‚Äì conform indica»õiei tale
        category: "Utilizare eficientƒÉ",
        explanation: "√én aceastƒÉ versiune de joc, este marcatƒÉ ca fiind corectƒÉ varianta a), conform setƒÉrii tale."
      },
      {
        text: "Ce rol are tehnologia √Æn formarea viitorului elevilor?",
        options: [
          "√énlocuie»ôte complet g√¢ndirea criticƒÉ cu automatizare.",
          "SprijinƒÉ procesul de √ÆnvƒÉ»õare, oferind instrumente pentru dezvoltarea competen»õelor.",
          "Face ca elevii sƒÉ nu mai √Ænve»õe niciodatƒÉ √Æn mod tradi»õional."
        ],
        correctIndex: 1, // b
        category: "Tehnologie »ôi educa»õie",
        explanation: "Tehnologia oferƒÉ instrumente moderne care sprijinƒÉ √ÆnvƒÉ»õarea »ôi dezvoltarea competen»õelor."
      }
    ];

    // 2. CONFIGURARE
    const QUESTION_TIME_SECONDS = 20;
    const BASE_POINTS = 100;
    const BONUS_PER_SECOND = 5;

    // 3. STARE
    let currentIndex = -1;
    let playerScore = 0;
    let timeLeft = QUESTION_TIME_SECONDS;
    let timerInterval = null;
    let questionActive = false;
    let playerName = null;

    // 4. ELEMENTE DOM
    const questionTextEl = document.getElementById("questionText");
    const questionIndexEl = document.getElementById("questionIndex");
    const questionTotalEl = document.getElementById("questionTotal");
    const questionCategoryEl = document.getElementById("questionCategory");
    const answersContainerEl = document.getElementById("answersContainer");
    const timerBarEl = document.getElementById("timerBar");
    const timeLeftEl = document.getElementById("timeLeft");

    const playerScoreEl = document.getElementById("playerScore");
    const playerNameLabelEl = document.getElementById("playerNameLabel");
    const playerBadgeEl = document.getElementById("playerBadge");
    const timerBadgeEl = document.getElementById("timerBadge");

    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");

    const infoBubbleEl = document.getElementById("infoBubble");
    const infoMetaEl = document.getElementById("infoMeta");
    const logEl = document.getElementById("log");

    const startOverlayEl = document.getElementById("startOverlay");
    const startNameInputEl = document.getElementById("startNameInput");
    const enterGameBtn = document.getElementById("enterGameBtn");
    const startSkipNameBtn = document.getElementById("startSkipNameBtn");

    // UTILITARE
    function logMessage(text) {
      const entry = document.createElement("div");
      entry.className = "log-entry";
      entry.innerHTML = text;
      logEl.appendChild(entry);
      logEl.scrollTop = logEl.scrollHeight;
    }

    function setTimerBar(value) {
      const clamped = Math.max(0, Math.min(1, value));
      timerBarEl.style.transform = "scaleX(" + clamped + ")";
    }

    function setScores() {
      playerScoreEl.textContent = playerScore;
    }

    function pulse(el) {
      el.classList.remove("badge");
      void el.offsetWidth;
      el.classList.add("badge");
      el.classList.add("pulse");
      setTimeout(() => el.classList.remove("pulse"), 250);
    }

    function letterFromIndex(i) {
      return String.fromCharCode("A".charCodeAt(0) + i);
    }

    // TIMER
    function startTimer() {
      clearInterval(timerInterval);
      timeLeft = QUESTION_TIME_SECONDS;
      timeLeftEl.textContent = timeLeft.toString();
      setTimerBar(1);
      pulse(timerBadgeEl);

      timerInterval = setInterval(() => {
        if (!questionActive) {
          clearInterval(timerInterval);
          return;
        }
        timeLeft -= 1;
        timeLeftEl.textContent = Math.max(0, timeLeft).toString();
        setTimerBar(timeLeft / QUESTION_TIME_SECONDS);
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          handleTimeUp();
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
    }

    // RƒÇSPUNSURI
    function handleAnswerClick(index) {
      if (!questionActive) return;
      const question = questions[currentIndex];
      questionActive = false;
      stopTimer();

      const buttons = answersContainerEl.querySelectorAll(".answer-btn");
      buttons.forEach((btn, i) => {
        btn.classList.add("disabled");
        const key = btn.querySelector(".answer-key");
        if (i === question.correctIndex) {
          btn.classList.add("correct");
          key.classList.add("correct");
        } else if (i === index) {
          btn.classList.add("wrong");
          key.classList.add("wrong");
        }
      });

      const correct = index === question.correctIndex;
      const correctLetter = letterFromIndex(question.correctIndex);

      if (correct) {
        const bonus = timeLeft * BONUS_PER_SECOND;
        const points = BASE_POINTS + bonus;
        playerScore += points;
        setScores();
        pulse(playerBadgeEl);

        infoBubbleEl.textContent = "Bravo! Ai ales varianta corectƒÉ.";
        infoMetaEl.textContent = `Ai ob»õinut ${Math.round(points)} puncte pentru aceastƒÉ √Æntrebare.`;

        logMessage(
          `<strong>√éntrebarea ${currentIndex + 1}</strong>: rƒÉspuns corect (+${Math.round(
            points
          )} puncte, timp rƒÉmas: ${Math.max(0, timeLeft)}s).`
        );
      } else {
        infoBubbleEl.textContent = "De data aceasta nu ai ales varianta corectƒÉ.";
        infoMetaEl.textContent = `RƒÉspunsul corect era varianta ${correctLetter}.`;

        logMessage(
          `<strong>√éntrebarea ${currentIndex + 1}</strong>: rƒÉspuns gre»ôit. RƒÉspuns corect: ${correctLetter}.`
        );
      }

      if (question.explanation) {
        setTimeout(() => {
          logMessage(`<em>Explica»õie:</em> ${question.explanation}`);
        }, 300);
      }

      setTimeout(nextQuestionOrEnd, 1600);
    }

    function handleTimeUp() {
      if (!questionActive) return;
      questionActive = false;
      const question = questions[currentIndex];

      const buttons = answersContainerEl.querySelectorAll(".answer-btn");
      buttons.forEach((btn, i) => {
        btn.classList.add("disabled");
        const key = btn.querySelector(".answer-key");
        if (i === question.correctIndex) {
          btn.classList.add("correct");
          key.classList.add("correct");
        }
      });

      const correctLetter = letterFromIndex(question.correctIndex);

      infoBubbleEl.textContent = "Timpul a expirat √Ænainte sƒÉ alegi un rƒÉspuns.";
      infoMetaEl.textContent = `RƒÉspunsul corect era varianta ${correctLetter}.`;

      logMessage(
        `<strong>√éntrebarea ${currentIndex + 1}</strong>: timpul a expirat. RƒÉspuns corect: ${correctLetter}.`
      );

      if (question.explanation) {
        setTimeout(() => {
          logMessage(`<em>Explica»õie:</em> ${question.explanation}`);
        }, 300);
      }

      setTimeout(nextQuestionOrEnd, 1600);
    }

    // √éNTREBƒÇRI
    function showQuestion(index) {
      const question = questions[index];
      const total = questions.length;

      questionIndexEl.textContent = (index + 1).toString();
      questionTotalEl.textContent = total.toString();
      questionCategoryEl.textContent = question.category || "Lumea digitalƒÉ";
      questionTextEl.textContent = question.text;
      answersContainerEl.innerHTML = "";

      question.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "answer-btn";
        btn.innerHTML = `
          <div class="answer-key">${letterFromIndex(i)}</div>
          <div class="answer-text">${opt}</div>
        `;
        btn.addEventListener("click", () => handleAnswerClick(i));
        answersContainerEl.appendChild(btn);
      });

      questionActive = true;
      infoBubbleEl.textContent = "Alege varianta corectƒÉ c√¢t mai repede.";
      infoMetaEl.textContent = `Ai ${QUESTION_TIME_SECONDS} secunde pentru aceastƒÉ √Æntrebare.`;

      setTimerBar(1);
      timeLeftEl.textContent = QUESTION_TIME_SECONDS.toString();
      startTimer();
    }

    function nextQuestionOrEnd() {
      currentIndex++;
      if (currentIndex < questions.length) {
        showQuestion(currentIndex);
      } else {
        endGame();
      }
    }

    // START / FINAL JOC
    function startGame() {
      playerScore = 0;
      setScores();
      currentIndex = -1;
      logEl.innerHTML = "";
      startBtn.disabled = true;
      restartBtn.disabled = false;

      const displayName = playerName || "Tu";
      logMessage(`<strong>${displayName}</strong> a √Ænceput jocul.`);
      infoBubbleEl.textContent = "SƒÉ √Æncepem! ConcentreazƒÉ-te »ôi rƒÉspunde c√¢t mai rapid.";
      infoMetaEl.textContent = "Ai grijƒÉ la timp ‚Äì fiecare secundƒÉ conteazƒÉ.";

      nextQuestionOrEnd();
    }

    function endGame() {
      questionActive = false;
      stopTimer();
      setTimerBar(0);
      timeLeftEl.textContent = "0";
      startBtn.disabled = false;
      startBtn.textContent = "JoacƒÉ din nou";

      const displayName = playerName || "Tu";
      infoBubbleEl.textContent = `Gata jocul!`;
      infoMetaEl.textContent = `Scorul tƒÉu final este ${playerScore} puncte. AratƒÉ-l profesorului pentru clasament.`;

      logMessage(
        `<strong>Scor final</strong> pentru ${displayName}: ${playerScore} puncte.`
      );
    }

    // PAGINA DE START
    function enterGame(withName) {
      if (withName) {
        const value = startNameInputEl.value.trim();
        if (value) {
          playerName = value;
          playerNameLabelEl.textContent = value;
          logMessage(`Numele tƒÉu a fost setat la <strong>${value}</strong>.`);
        } else {
          playerName = null;
          playerNameLabelEl.textContent = "Tu";
        }
      } else {
        playerName = null;
        playerNameLabelEl.textContent = "Tu";
      }

      startOverlayEl.classList.add("hidden");
      infoBubbleEl.textContent = "C√¢nd e»ôti gata, apasƒÉ ‚ÄûStart joc‚Äù pentru a √Æncepe.";
      infoMetaEl.textContent = "Nu uita: la final, scorul tƒÉu poate intra √Æn clasamentul clasei.";
    }

    // EVENIMENTE
    startBtn.addEventListener("click", () => startGame());
    restartBtn.addEventListener("click", () => startGame());

    enterGameBtn.addEventListener("click", () => enterGame(true));
    startSkipNameBtn.addEventListener("click", () => enterGame(false));

    startNameInputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") enterGame(true);
    });

    // INIT
    questionTotalEl.textContent = questions.length.toString();
    setScores();
    setTimerBar(0);
    timeLeftEl.textContent = "0";
    infoMetaEl.textContent = "ApasƒÉ ‚ÄûStart joc‚Äù pentru a √Æncepe prima √Æntrebare.";
  </script>
</body>
</html>
