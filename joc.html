<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>BƒÉtƒÉlia cu Profesorul Virtual</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #020617, #020617 45%, #020617 100%);
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app {
      width: 100%;
      max-width: 900px;
      background: rgba(15, 23, 42, 0.95);
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.6);
      padding: 20px 20px 24px;
      backdrop-filter: blur(10px);
      animation: cardIn 0.6s ease-out;
      position: relative;
      overflow: hidden;
    }

    @keyframes cardIn {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 16px;
    }

    .title-block {
      max-width: 60%;
    }

    h1 {
      font-size: 1.6rem;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #9ca3af;
    }

    .stats-bar {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
      gap: 8px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 0.78rem;
    }

    .badge-label {
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-size: 0.7rem;
    }

    .badge-value {
      font-weight: 600;
    }

    .badge.player {
      border-color: rgba(34, 197, 94, 0.8);
      background: radial-gradient(circle at top left, rgba(22, 163, 74, 0.35), rgba(17, 24, 39, 0.95));
    }

    .badge.ai {
      border-color: rgba(59, 130, 246, 0.8);
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.35), rgba(17, 24, 39, 0.95));
    }

    .badge.timer {
      border-color: rgba(248, 113, 113, 0.9);
      background: radial-gradient(circle at top left, rgba(248, 113, 113, 0.25), rgba(17, 24, 39, 0.95));
    }

    .badge.pulse {
      animation: pulse 0.4s ease-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    .content {
      border-radius: 18px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 1));
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 16px;
      display: grid;
      grid-template-columns: 1.4fr 1fr;
      gap: 16px;
    }

    @media (max-width: 768px) {
      .content {
        grid-template-columns: 1fr;
      }
      .title-block {
        max-width: 100%;
      }
    }

    .question-panel {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .question-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .question-box {
      border-radius: 14px;
      padding: 12px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(75, 85, 99, 0.9);
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.7);
      position: relative;
      overflow: hidden;
    }

    .question-text {
      font-size: 1rem;
      line-height: 1.4;
    }

    .timer-bar-wrapper {
      margin-top: 10px;
      height: 8px;
      background: rgba(31, 41, 55, 0.9);
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .timer-bar {
      height: 100%;
      width: 100%;
      background: linear-gradient(to right, #22c55e, #f97316, #ef4444);
      transform-origin: left;
      transform: scaleX(1);
      transition: transform 0.2s linear;
    }

    .answers {
      margin-top: 10px;
      display: grid;
      gap: 8px;
    }

    .answer-btn {
      width: 100%;
      text-align: left;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      font-size: 0.92rem;
      cursor: pointer;
      display: flex;
      gap: 10px;
      align-items: center;
      transition: transform 0.08s ease, box-shadow 0.12s ease, background 0.15s ease, border-color 0.15s ease;
    }

    .answer-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
      border-color: rgba(148, 163, 184, 0.9);
    }

    .answer-btn:active {
      transform: translateY(0) scale(0.99);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.35);
    }

    .answer-key {
      width: 24px;
      height: 24px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: #9ca3af;
      flex-shrink: 0;
    }

    .answer-text {
      flex: 1;
    }

    .answer-btn.correct {
      background: radial-gradient(circle at top left, rgba(22, 163, 74, 0.35), rgba(15, 23, 42, 0.98));
      border-color: rgba(34, 197, 94, 0.9);
    }

    .answer-btn.wrong {
      background: radial-gradient(circle at top left, rgba(239, 68, 68, 0.35), rgba(15, 23, 42, 0.98));
      border-color: rgba(248, 113, 113, 0.95);
    }

    .answer-btn.disabled {
      opacity: 0.7;
      pointer-events: none;
    }

    .answer-key.correct {
      border-color: rgba(34, 197, 94, 0.9);
      color: #bbf7d0;
    }

    .answer-key.wrong {
      border-color: rgba(239, 68, 68, 0.9);
      color: #fecaca;
    }

    .controls {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .btn {
      padding: 7px 13px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.8rem;
      transition: transform 0.08s ease, box-shadow 0.12s ease, background 0.15s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(to right, #22c55e, #16a34a);
      color: #022c22;
      box-shadow: 0 8px 18px rgba(34, 197, 94, 0.35);
    }

    .btn-primary:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 4px 10px rgba(34, 197, 94, 0.25);
    }

    .btn-ghost {
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .btn[disabled] {
      opacity: 0.55;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    /* Profesorul virtual / chat lateral */
    .side-panel {
      border-radius: 16px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), rgba(15, 23, 42, 1));
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .ai-header {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .ai-avatar {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #60a5fa, #2563eb, #1d4ed8);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1rem;
      color: white;
      box-shadow: 0 6px 14px rgba(37, 99, 235, 0.6);
    }

    .ai-name {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .ai-role {
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .ai-bubble {
      margin-top: 4px;
      border-radius: 12px;
      padding: 8px 10px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 0.82rem;
      line-height: 1.3;
      position: relative;
      overflow: hidden;
    }

    .ai-bubble::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top left, rgba(59, 130, 246, 0.22), transparent 55%);
      opacity: 0;
      animation: shine 0.7s ease-out forwards;
    }

    @keyframes shine {
      0% { opacity: 0; }
      30% { opacity: 1; }
      100% { opacity: 0; }
    }

    .ai-meta {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 2px;
    }

    .log {
      margin-top: 6px;
      font-size: 0.78rem;
      color: #9ca3af;
      max-height: 130px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .log-entry {
      margin-bottom: 4px;
    }

    .log-entry strong {
      color: #e5e7eb;
    }

    .footer-note {
      margin-top: 10px;
      font-size: 0.75rem;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      gap: 6px;
      flex-wrap: wrap;
    }

    .footer-note span {
      max-width: 100%;
    }

    .highlight {
      color: #22c55e;
    }

    .danger {
      color: #f97316;
    }

    .hidden {
      display: none !important;
    }

    /* === PAGINA DE START / OVERLAY === */
    .start-overlay {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.98));
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
      padding: 16px;
    }

    .start-card {
      max-width: 520px;
      width: 100%;
      background: rgba(15, 23, 42, 0.98);
      border-radius: 20px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.7);
      padding: 18px 18px 16px;
      animation: startIn 0.4s ease-out;
    }

    @keyframes startIn {
      from {
        opacity: 0;
        transform: translateY(12px) scale(0.98);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .start-title {
      font-size: 1.4rem;
      margin-bottom: 4px;
    }

    .start-subtitle {
      font-size: 0.9rem;
      color: #9ca3af;
      margin-bottom: 10px;
    }

    .start-section-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-top: 10px;
      margin-bottom: 4px;
      color: #e5e7eb;
    }

    .start-list {
      font-size: 0.85rem;
      color: #d1d5db;
      padding-left: 16px;
    }

    .start-list li {
      margin-bottom: 4px;
    }

    .start-name-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .start-name-row label {
      font-size: 0.85rem;
      color: #e5e7eb;
    }

    .start-name-row input {
      flex: 1;
      min-width: 0;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      font-size: 0.85rem;
    }

    .start-name-row input::placeholder {
      color: #6b7280;
    }

    .start-buttons {
      margin-top: 12px;
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .start-note {
      margin-top: 6px;
      font-size: 0.78rem;
      color: #9ca3af;
    }

    @media (max-width: 600px) {
      .start-card {
        padding: 14px 12px 12px;
      }
      .start-title {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- OVERLAY DE START (PAGINA DE INSTRUC»öIUNI) -->
    <div class="start-overlay" id="startOverlay">
      <div class="start-card">
        <div class="start-title">Bine ai venit √Æn ‚ÄûBƒÉtƒÉlia cu Profesorul Virtual‚Äù! üëã</div>
        <div class="start-subtitle">
          Vei rƒÉspunde la √ÆntrebƒÉri despre lumea digitalƒÉ »ôi vei concura cu Profesorul virtual (AI).
          Cronometrul √Æncepe doar dupƒÉ ce intri √Æn joc »ôi ape»ôi <strong>Start joc</strong>.
        </div>

        <div class="start-section-title">Cum se joacƒÉ:</div>
        <ul class="start-list">
          <li>üì± Alege varianta corectƒÉ √Ænainte ca timpul sƒÉ expire.</li>
          <li>‚è±Ô∏è Fiecare √Æntrebare are un timp limitat. Cu c√¢t rƒÉspunzi mai repede, cu at√¢t prime»ôti mai multe puncte.</li>
          <li>ü§ñ Profesorul virtual √Æ»ôi alege »ôi el un rƒÉspuns ‚Äì la final ve»õi compara scorurile.</li>
          <li>üèÜ La final, vede»õi cine c√¢»ôtigƒÉ: nativul digital sau AI.</li>
        </ul>

        <div class="start-section-title">√énainte sƒÉ √Æncepem:</div>
        <div class="start-name-row">
          <label for="startNameInput">Numele tƒÉu (op»õional):</label>
          <input
            type="text"
            id="startNameInput"
            placeholder="Scrie-»õi prenumele (ex: Andrei)"
          />
        </div>

        <div class="start-note">
          Numele va apƒÉrea l√¢ngƒÉ scorul tƒÉu, dar nu porne»ôte √ÆncƒÉ jocul »ôi nici cronometrul.
          Jocul √Æncepe abia c√¢nd ape»ôi <strong>Start joc</strong √Æn ecranul principal.
        </div>

        <div class="start-buttons">
          <button class="btn btn-ghost" id="startSkipNameBtn">IntrƒÉ fƒÉrƒÉ nume</button>
          <button class="btn btn-primary" id="enterGameBtn">IntrƒÉ √Æn joc</button>
        </div>
      </div>
    </div>

    <!-- HEADER JOC -->
    <div class="header">
      <div class="title-block">
        <h1>BƒÉtƒÉlia cu Profesorul Virtual</h1>
        <p class="subtitle">
          Elevi nativi digitali vs. Profesorul virtual AI ‚Äì rƒÉspunde la √ÆntrebƒÉri despre lumea digitalƒÉ
          √Ænainte sƒÉ expire timpul ‚è±Ô∏è.
        </p>
      </div>
      <div class="stats-bar">
        <div class="badge player" id="playerBadge">
          <div>
            <div class="badge-label">Elev</div>
            <div class="badge-value" id="playerNameLabel">Tu</div>
          </div>
          <div class="badge-value" id="playerScore">0</div>
        </div>
        <div class="badge ai" id="aiBadge">
          <div>
            <div class="badge-label">Profesor virtual</div>
            <div class="badge-value">AI</div>
          </div>
          <div class="badge-value" id="aiScore">0</div>
        </div>
        <div class="badge timer" id="timerBadge">
          <div>
            <div class="badge-label">Timp</div>
            <div class="badge-value"><span id="timeLeft">0</span>s</div>
          </div>
        </div>
      </div>
    </div>

    <!-- CON»öINUT PRINCIPAL -->
    <div class="content">
      <div class="question-panel">
        <div class="question-meta">
          <span>√éntrebarea <span id="questionIndex">1</span>/<span id="questionTotal">1</span></span>
          <span id="questionCategory">‚Äî</span>
        </div>

        <div class="question-box">
          <div class="question-text" id="questionText">
            ApasƒÉ ‚ÄûStart joc‚Äù pentru a √Æncepe runda √Æmpotriva Profesorului virtual.
          </div>
          <div class="timer-bar-wrapper">
            <div class="timer-bar" id="timerBar"></div>
          </div>
          <div class="answers" id="answersContainer">
            <!-- Butoane rƒÉspuns generate dinamic -->
          </div>
        </div>

        <div class="controls">
          <button class="btn btn-ghost" id="restartBtn" disabled>Reia jocul</button>
          <button class="btn btn-primary" id="startBtn">Start joc</button>
        </div>
      </div>

      <div class="side-panel">
        <div class="ai-header">
          <div class="ai-avatar">AI</div>
          <div>
            <div class="ai-name">Profesorul virtual</div>
            <div class="ai-role">Adversarul tƒÉu digital</div>
          </div>
        </div>

        <div class="ai-bubble" id="aiBubble">
          ‚ÄûSalut! Eu sunt profesorul tƒÉu virtual. Hai sƒÉ vedem dacƒÉ un nativ digital mƒÉ poate depƒÉ»ôi!‚Äù
        </div>
        <div class="ai-meta" id="aiMeta">AI a»ôteaptƒÉ sƒÉ √Æncepi jocul.</div>

        <div class="log" id="log"></div>
      </div>
    </div>

    <div class="footer-note">
      <span>
        üîÅ <span class="highlight">Competi»õie live √Æn clasƒÉ:</span> fiecare elev √Æ»ôi vede scorul pe telefon.
        Profesorul poate compara scorurile la final.
      </span>
      <span>
        ü§ñ Profesorul virtual rƒÉspunde »ôi el ‚Äì la final vei vedea cine c√¢»ôtigƒÉ: <span class="danger">AI</span> sau
        <span class="highlight">nativii digitali</span>.
      </span>
    </div>
  </div>

  <script>
    // ==============================
    // 1. SETUL DE √éNTREBƒÇRI
    // ==============================
    // üëâ C√ÇND √éMI DAI TU √éNTREBƒÇRILE REALE:
    // Modifici/√Ænlocuie»ôti obiectele din acest array `questions`.

    const questions = [
      {
        text: "Ce √ÆnseamnƒÉ sƒÉ fii ‚Äûnativ digital‚Äù?",
        options: [
          "SƒÉ te fi nƒÉscut cu telefonul √Æn m√¢nƒÉ.",
          "SƒÉ fii crescut √Æntr-o lume √Æn care tehnologia digitalƒÉ este prezentƒÉ peste tot.",
          "SƒÉ »ôtii sƒÉ instalezi orice aplica»õie fƒÉrƒÉ ajutor.",
          "SƒÉ petreci cel pu»õin 5 ore pe zi pe internet."
        ],
        correctIndex: 1,
        category: "Nativi digitali",
        explanation: "Un nativ digital e cineva care a crescut √Ænconjurat de tehnologie »ôi pentru care mediul digital e ‚Äûnormalul‚Äù."
      },
      {
        text: "Care este cea mai sigurƒÉ parolƒÉ?",
        options: [
          "numeprenume2008",
          "parola1234",
          "Digi!2024@School",
          "123456"
        ],
        correctIndex: 2,
        category: "Securitate",
        explanation: "O parolƒÉ puternicƒÉ are litere mari/mici, cifre »ôi simboluri, »ôi nu con»õine date u»ôor de ghicit (nume, an na»ôtere)."
      },
      {
        text: "Prime»ôti un mesaj ‚ÄûAi c√¢»ôtigat un telefon! IntrƒÉ pe acest link »ôi introdu datele cardului.‚Äù Ce faci?",
        options: [
          "Intru repede, sƒÉ nu pierd premiul.",
          "Trimit linkul tuturor prietenilor.",
          "Ignor »ôi »ôterg mesajul / √Æl raportez.",
          "RƒÉspund cu ‚ÄòMul»õumesc!‚Äô."
        ],
        correctIndex: 2,
        category: "Siguran»õƒÉ online",
        explanation: "Acesta este un exemplu tipic de tentativƒÉ de fraudƒÉ (phishing). Nu dai niciodatƒÉ date personale/financiare."
      }
    ];

    // ==============================
    // 2. CONFIGURARE JOC
    // ==============================
    const QUESTION_TIME_SECONDS = 20; // ‚è±Ô∏è timp per √Æntrebare
    const BASE_POINTS = 100;          // puncte pentru un rƒÉspuns corect
    const BONUS_PER_SECOND = 5;       // bonus pentru fiecare secundƒÉ rƒÉmasƒÉ

    // ==============================
    // 3. STARE JOC
    // ==============================
    let currentIndex = -1;
    let playerScore = 0;
    let aiScore = 0;
    let timeLeft = QUESTION_TIME_SECONDS;
    let timerInterval = null;
    let questionActive = false;
    let aiAnswerIndex = null;
    let playerName = null;

    // ==============================
    // 4. ELEMENTE DIN DOM
    // ==============================
    const questionTextEl = document.getElementById("questionText");
    const questionIndexEl = document.getElementById("questionIndex");
    const questionTotalEl = document.getElementById("questionTotal");
    const questionCategoryEl = document.getElementById("questionCategory");
    const answersContainerEl = document.getElementById("answersContainer");
    const timerBarEl = document.getElementById("timerBar");
    const timeLeftEl = document.getElementById("timeLeft");

    const playerScoreEl = document.getElementById("playerScore");
    const aiScoreEl = document.getElementById("aiScore");
    const playerNameLabelEl = document.getElementById("playerNameLabel");
    const playerBadgeEl = document.getElementById("playerBadge");
    const aiBadgeEl = document.getElementById("aiBadge");
    const timerBadgeEl = document.getElementById("timerBadge");

    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");

    const aiBubbleEl = document.getElementById("aiBubble");
    const aiMetaEl = document.getElementById("aiMeta");
    const logEl = document.getElementById("log");

    const startOverlayEl = document.getElementById("startOverlay");
    const startNameInputEl = document.getElementById("startNameInput");
    const enterGameBtn = document.getElementById("enterGameBtn");
    const startSkipNameBtn = document.getElementById("startSkipNameBtn");

    // ==============================
    // 5. UTILITARE
    // ==============================
    function logMessage(text) {
      const entry = document.createElement("div");
      entry.className = "log-entry";
      entry.innerHTML = text;
      logEl.appendChild(entry);
      logEl.scrollTop = logEl.scrollHeight;
    }

    function setTimerBar(value) {
      const clamped = Math.max(0, Math.min(1, value));
      timerBarEl.style.transform = "scaleX(" + clamped + ")";
    }

    function setScores() {
      playerScoreEl.textContent = playerScore;
      aiScoreEl.textContent = aiScore;
    }

    function pulse(el) {
      el.classList.remove("badge");
      void el.offsetWidth; // trigger reflow
      el.classList.add("badge");
      el.classList.add("pulse");
      setTimeout(() => el.classList.remove("pulse"), 300);
    }

    function letterFromIndex(i) {
      return String.fromCharCode("A".charCodeAt(0) + i);
    }

    // ==============================
    // 6. PROFESORUL VIRTUAL (AI)
    // ==============================
    function aiChooseAnswer(question) {
      const correct = question.correctIndex;
      const rand = Math.random();
      let chosen;
      if (rand < 0.7) {
        chosen = correct;
      } else {
        const others = question.options.map((_, i) => i).filter((i) => i !== correct);
        chosen = others[Math.floor(Math.random() * others.length)];
      }
      aiAnswerIndex = chosen;

      const letter = letterFromIndex(chosen);
      aiBubbleEl.textContent = `‚ÄûEu pariez pe varianta ${letter}. SƒÉ vedem dacƒÉ mƒÉ po»õi contrazice!‚Äù`;
      aiMetaEl.textContent = "Profesorul virtual »ôi-a ales deja rƒÉspunsul.";

      logMessage(`<strong>AI</strong>: a ales varianta <strong>${letter}</strong>.`);
    }

    function aiUpdateAfterQuestion(question, playerCorrect) {
      const aiCorrect = aiAnswerIndex === question.correctIndex;
      let aiPoints = 0;
      if (aiCorrect) {
        aiPoints = BASE_POINTS * 0.8;
      }

      aiScore += Math.round(aiPoints);
      setScores();
      pulse(aiBadgeEl);

      const letterCorrect = letterFromIndex(question.correctIndex);
      const letterAI = letterFromIndex(aiAnswerIndex);

      if (playerCorrect && aiCorrect) {
        aiBubbleEl.textContent =
          "‚ÄûDe data asta am√¢ndoi am avut dreptate. Frumos! Dar cine va conduce la final?‚Äù";
      } else if (playerCorrect && !aiCorrect) {
        aiBubbleEl.textContent =
          "‚ÄûHmm‚Ä¶ se pare cƒÉ m-ai depƒÉ»ôit la √Æntrebarea asta. √éncep sƒÉ mƒÉ √Ængrijorez!‚Äù";
      } else if (!playerCorrect && aiCorrect) {
        aiBubbleEl.textContent =
          "‚ÄûAm prins-o eu de data asta. Nu-i nimic, √ÆncƒÉ po»õi reveni!‚Äù";
      } else {
        aiBubbleEl.textContent =
          "‚ÄûNici eu, nici tu‚Ä¶ sƒÉ revedem no»õiunile digitale data viitoare.‚Äù";
      }

      aiMetaEl.textContent =
        "RƒÉspuns corect: " + letterCorrect + ". AI a ales " + letterAI + ".";

      logMessage(
        `<strong>Rezultat √Æntrebare:</strong> Tu: ${playerCorrect ? "corect" : "gre»ôit / timp expirat"}, AI: ${
          aiCorrect ? "corect" : "gre»ôit"
        }.`
      );
    }

    // ==============================
    // 7. TIMER
    // ==============================
    function startTimer() {
      clearInterval(timerInterval);
      timeLeft = QUESTION_TIME_SECONDS;
      timeLeftEl.textContent = timeLeft.toString();
      setTimerBar(1);
      pulse(timerBadgeEl);

      timerInterval = setInterval(() => {
        if (!questionActive) {
          clearInterval(timerInterval);
          return;
        }
        timeLeft -= 1;
        timeLeftEl.textContent = Math.max(0, timeLeft).toString();
        setTimerBar(timeLeft / QUESTION_TIME_SECONDS);

        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          handleTimeUp();
        }
      }, 1000);
    }

    function stopTimer() {
      clearInterval(timerInterval);
    }

    // ==============================
    // 8. GESTIONARE RƒÇSPUNS
    // ==============================
    function handleAnswerClick(index) {
      if (!questionActive) return;
      const question = questions[currentIndex];
      questionActive = false;
      stopTimer();

      const buttons = answersContainerEl.querySelectorAll(".answer-btn");
      buttons.forEach((btn, i) => {
        btn.classList.add("disabled");
        const key = btn.querySelector(".answer-key");
        if (i === question.correctIndex) {
          btn.classList.add("correct");
          key.classList.add("correct");
        } else if (i === index) {
          btn.classList.add("wrong");
          key.classList.add("wrong");
        }
      });

      let playerCorrect = index === question.correctIndex;
      let points = 0;
      if (playerCorrect) {
        const bonus = timeLeft * BONUS_PER_SECOND;
        points = BASE_POINTS + bonus;
        playerScore += points;
        setScores();
        pulse(playerBadgeEl);

        logMessage(
          `<strong>Tu</strong>: rƒÉspuns corect! +${Math.round(points)} puncte (bonus timp: ${Math.max(
            0,
            timeLeft
          )}s).`
        );
      } else {
        logMessage("<strong>Tu</strong>: rƒÉspuns gre»ôit sau nu ai ales varianta corectƒÉ.");
      }

      aiUpdateAfterQuestion(question, playerCorrect);

      if (question.explanation) {
        setTimeout(() => {
          logMessage(`<em>Explica»õie:</em> ${question.explanation}`);
        }, 400);
      }

      setTimeout(nextQuestionOrEnd, 1800);
    }

    function handleTimeUp() {
      if (!questionActive) return;
      questionActive = false;

      const question = questions[currentIndex];
      const buttons = answersContainerEl.querySelectorAll(".answer-btn");
      buttons.forEach((btn, i) => {
        btn.classList.add("disabled");
        const key = btn.querySelector(".answer-key");
        if (i === question.correctIndex) {
          btn.classList.add("correct");
          key.classList.add("correct");
        }
      });

      logMessage("<strong>Tu</strong>: timpul a expirat, nu ai ales niciun rƒÉspuns.");
      aiUpdateAfterQuestion(question, false);

      if (question.explanation) {
        setTimeout(() => {
          logMessage(`<em>Explica»õie:</em> ${question.explanation}`);
        }, 400);
      }

      setTimeout(nextQuestionOrEnd, 1800);
    }

    // ==============================
    // 9. AFI»òARE √éNTREBARE
    // ==============================
    function showQuestion(index) {
      const question = questions[index];
      const total = questions.length;

      questionIndexEl.textContent = (index + 1).toString();
      questionTotalEl.textContent = total.toString();
      questionCategoryEl.textContent = question.category || "Lumea digitalƒÉ";

      questionTextEl.textContent = question.text;
      answersContainerEl.innerHTML = "";

      question.options.forEach((opt, i) => {
        const btn = document.createElement("button");
        btn.className = "answer-btn";
        btn.innerHTML = `
          <div class="answer-key">${letterFromIndex(i)}</div>
          <div class="answer-text">${opt}</div>
        `;
        btn.addEventListener("click", () => handleAnswerClick(i));
        answersContainerEl.appendChild(btn);
      });

      questionActive = true;
      aiMetaEl.textContent = "Profesorul virtual g√¢nde»ôte deja rƒÉspunsul sƒÉu‚Ä¶";
      aiBubbleEl.textContent = "‚ÄûAnalizez informa»õiile digitale‚Ä¶ rƒÉspunsul meu vine imediat!‚Äù";

      aiAnswerIndex = null;
      setTimerBar(1);
      timeLeftEl.textContent = QUESTION_TIME_SECONDS.toString();

      setTimeout(() => {
        if (!questionActive) return;
        aiChooseAnswer(question);
      }, 700);

      startTimer();
    }

    function nextQuestionOrEnd() {
      currentIndex++;
      if (currentIndex < questions.length) {
        showQuestion(currentIndex);
      } else {
        endGame();
      }
    }

    // ==============================
    // 10. PORNIRE / FINAL JOC
    // ==============================
    function startGame() {
      playerScore = 0;
      aiScore = 0;
      setScores();
      currentIndex = -1;
      logEl.innerHTML = "";
      startBtn.disabled = true;
      restartBtn.disabled = false;

      const displayName = playerName || "Tu";
      logMessage(`<strong>${displayName}</strong> a √Ænceput jocul √Æmpotriva Profesorului virtual.`);
      aiBubbleEl.textContent = "‚ÄûSucces! SƒÉ vedem c√¢t de bine stƒÉp√¢ne»ôti lumea digitalƒÉ.‚Äù";
      aiMetaEl.textContent = "Jocul a √Ænceput.";

      nextQuestionOrEnd();
    }

    function endGame() {
      questionActive = false;
      stopTimer();
      setTimerBar(0);
      timeLeftEl.textContent = "0";

      startBtn.disabled = false;
      startBtn.textContent = "JoacƒÉ din nou";

      const displayName = playerName || "Tu";
      let message;
      if (playerScore > aiScore) {
        message = `‚ÄûImpresionant, ${displayName}! Nativii digitali au c√¢»ôtigat! üëè‚Äù`;
      } else if (playerScore < aiScore) {
        message = "‚ÄûDe data asta AI a c√¢»ôtigat‚Ä¶ dar po»õi sƒÉ √Æncerci din nou! ü§ñ‚Äù";
      } else {
        message = "‚ÄûEgalitate perfectƒÉ! Se pare cƒÉ g√¢ndim foarte asemƒÉnƒÉtor. üòé‚Äù";
      }

      aiBubbleEl.textContent = message;
      aiMetaEl.textContent = `Scor final ‚Äì ${displayName}: ${playerScore}, AI: ${aiScore}.`;

      logMessage(
        `<strong>Scor final:</strong> ${displayName}: ${playerScore} puncte, Profesor virtual (AI): ${aiScore} puncte.`
      );
      logMessage("Profesorul poate compara acum scorurile elevilor pentru un clasament √Æn clasƒÉ.");
    }

    // ==============================
    // 11. PAGINA DE START ‚Äì NUME FƒÇRƒÇ CRONOMETRU
    // ==============================
    function enterGame(withName) {
      if (withName) {
        const value = startNameInputEl.value.trim();
        if (value) {
          playerName = value;
          playerNameLabelEl.textContent = value;
          logMessage(`Numele tƒÉu a fost setat la <strong>${value}</strong>.`);
        } else {
          playerName = null;
          playerNameLabelEl.textContent = "Tu";
        }
      } else {
        playerName = null;
        playerNameLabelEl.textContent = "Tu";
      }

      startOverlayEl.classList.add("hidden");
      // IMPORTANT: jocul NU √Æncepe √ÆncƒÉ.
      // Elevul trebuie sƒÉ apese ‚ÄûStart joc‚Äù.
      aiMetaEl.textContent = "ApasƒÉ ‚ÄûStart joc‚Äù c√¢nd e»ôti pregƒÉtit.";
      aiBubbleEl.textContent = "‚ÄûC√¢nd e»ôti gata, apasƒÉ Start joc »ôi sƒÉ √Æncepem bƒÉtƒÉlia digitalƒÉ!‚Äù";
    }

    // ==============================
    // 12. EVENIMENTE BUTOANE
    // ==============================
    startBtn.addEventListener("click", () => {
      startGame();
    });

    restartBtn.addEventListener("click", () => {
      startGame();
    });

    enterGameBtn.addEventListener("click", () => {
      enterGame(true);
    });

    startSkipNameBtn.addEventListener("click", () => {
      enterGame(false);
    });

    startNameInputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        enterGame(true);
      }
    });

    // ==============================
    // 13. INIT
    // ==============================
    questionTotalEl.textContent = questions.length.toString();
    setScores();
    setTimerBar(0);
    timeLeftEl.textContent = "0";
    aiMetaEl.textContent = "AI a»ôteaptƒÉ sƒÉ √Æncepi jocul.";

  </script>
</body>
</html>
